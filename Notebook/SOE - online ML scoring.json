{"paragraphs":[{"text":"%md\n\n## Crear objetos auxiliares\n\nPara la creación del modelo de *machine learning* se van a crear una serie de tablas y vistas auxiliares.\nEstos objetos contendrán los dataset de entrenamiento y de validación de los modelos que se van a evaluar.\n * ORDERS_ML_TEST\n * ORDERS_ML_TRAIN\n * ORDERS_ML_TEST_V\n * ORDERS_ML_TRAIN_V\n \n\nSe entrenan dos modelos de clasificación:\n * Decission Tree\n * Support Vector Machine\n\nSe calculan como métricas de calidad la precisión y la matriz de confusión para compararlos y decidir cual usar.\n\nPor otra parte se usa la tabla ORDERS_ML para almacenar los scorings que genera el modelo para los nuevos registros.\nEstos scorings los generará un trigger después de la inserción de cada nuevo registro en la tabla ORDERS.","user":"SOE","dateUpdated":"2019-10-08T14:45:25+0000","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/markdown","results":{},"editorSetting":{"language":"md","editOnDblClick":false},"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h2>Crear objetos auxiliares</h2>\n<p>Para la creación del modelo de <em>machine learning</em> se van a crear una serie de tablas y vistas auxiliares.\n<br  />Estos objetos contendrán los dataset de entrenamiento y de validación de los modelos que se van a evaluar.</p>\n<ul>\n<li>ORDERS_ML_TEST</li>\n<li>ORDERS_ML_TRAIN</li>\n<li>ORDERS_ML_TEST_V</li>\n<li>ORDERS_ML_TRAIN_V</li>\n</ul>\n<p>Se entrenan dos modelos de clasificación:</p>\n<ul>\n<li>Decission Tree</li>\n<li>Support Vector Machine</li>\n</ul>\n<p>Se calculan como métricas de calidad la precisión y la matriz de confusión para compararlos y decidir cual usar.</p>\n<p>Por otra parte se usa la tabla ORDERS_ML para almacenar los scorings que genera el modelo para los nuevos registros.\n<br  />Estos scorings los generará un trigger después de la inserción de cada nuevo registro en la tabla ORDERS.</p>\n"}]},"jobName":"paragraph_1568630456971_-276136604","id":"20190916-104056_966819947","dateCreated":"2019-09-16T10:41:14+0000","dateStarted":"2019-10-08T14:45:21+0000","dateFinished":"2019-10-08T14:45:21+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"focus":true,"$$hashKey":"object:144"},{"title":"Listar las tablas del esquema","text":"%sql\n-- select table_name from user_tables;\nselect view_name from user_views where view_name like 'ORDER%';","user":"SOE","dateUpdated":"2019-10-09T08:44:23+0000","config":{"colWidth":6,"enabled":true,"results":{},"editorSetting":{"language":"sql","editOnDblClick":false},"editorMode":"ace/mode/osql","title":true,"editorHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"VIEW_NAME\n"}]},"jobName":"paragraph_1568630515035_1007081035","id":"20190916-104155_1170051656","dateCreated":"2019-09-16T10:41:55+0000","dateStarted":"2019-10-09T08:44:23+0000","dateFinished":"2019-10-09T08:44:23+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:145"},{"text":"%sql\nselect table_name from user_tables where table_name like 'ORDER%';\n","user":"SOE","dateUpdated":"2019-10-10T10:56:23+0000","config":{"colWidth":6,"enabled":true,"results":{},"editorSetting":{"language":"sql","editOnDblClick":false},"editorMode":"ace/mode/osql"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"TABLE_NAME\nORDERS\nORDER_ITEMS\nORDERS_ML_TRAIN\nORDERS_ML_TEST\nORDERS_ML\nORDERENTRY_METADATA\nORDERS_SVM_MODEL_TEST_RESULT\nORDERS_SVM_MODEL_CM\nORDERS_SVM_ML_CM\nORDERS_DT_MODEL_TEST_RESULT\nORDERS_DT_MODEL_CM\nORDERS_DT_ML_CM\n"}]},"jobName":"paragraph_1568630617265_-2024032097","id":"20190916-104337_1711268694","dateCreated":"2019-09-16T10:43:37+0000","dateStarted":"2019-10-10T10:56:23+0000","dateFinished":"2019-10-10T10:58:35+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:146"},{"text":"%script\n\nCREATE TABLE ORDERS_ML (\n\"ORDER_ID\" NUMBER(12,0) CONSTRAINT \"ORDERS_ML_ID_NN\" NOT NULL ENABLE,\n\"SCORE\" NUMBER(2,0)\n)\n","user":"SOE","dateUpdated":"2019-10-09T08:44:39+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"\nTable ORDERS_ML created.\n\n"}]},"jobName":"paragraph_1568630671847_390126045","id":"20190916-104431_934176726","dateCreated":"2019-09-16T10:44:31+0000","dateStarted":"2019-10-09T08:44:39+0000","dateFinished":"2019-10-09T08:44:40+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:147"},{"text":"%script\nCREATE TABLE ORDERS_ML_TRAIN (\n\"ORDER_ID\" NUMBER(12,0) CONSTRAINT \"ORDERS_ML_TRAIN_ID_NN\" NOT NULL ENABLE,\n\"SCORE\" NUMBER(2,0)\n)","user":"SOE","dateUpdated":"2019-10-09T08:44:58+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"\nTable ORDERS_ML_TRAIN created.\n\n"}]},"jobName":"paragraph_1570544672967_-1520703264","id":"20191008-142432_1335165674","dateCreated":"2019-10-08T14:24:32+0000","dateStarted":"2019-10-09T08:44:58+0000","dateFinished":"2019-10-09T08:44:58+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:148"},{"text":"%script\n\nCREATE TABLE ORDERS_ML_TEST (\n\"ORDER_ID\" NUMBER(12,0) CONSTRAINT \"ORDERS_ML_TEST_ID_NN\" NOT NULL ENABLE,\n\"SCORE\" NUMBER(2,0)\n)","user":"SOE","dateUpdated":"2019-10-09T08:45:04+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"\nTable ORDERS_ML_TEST created.\n\n"}]},"jobName":"paragraph_1570444623833_-802355329","id":"20191007-103703_599544895","dateCreated":"2019-10-07T10:37:03+0000","dateStarted":"2019-10-09T08:45:04+0000","dateFinished":"2019-10-09T08:45:04+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:149"},{"text":"%script\ndrop view ORDERS_ML_V;\nCREATE VIEW ORDERS_ML_V as\nselect O.ORDER_ID, O.ORDER_MODE, O.ORDER_STATUS, \n       O.ORDER_TOTAL, O.PROMOTION_ID, O.WAREHOUSE_ID, O.DELIVERY_TYPE, O.COST_OF_DELIVERY, O.CUSTOMER_CLASS, M.SCORE \nfrom  ORDERS O, ORDERS_ML M \nwhere O.ORDER_ID = M.ORDER_ID;","user":"SOE","dateUpdated":"2019-10-09T15:27:13+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"\nView ORDERS_ML_V dropped.\n\n\n---------------------------\n\nView ORDERS_ML_V created.\n\n\n---------------------------\n"}]},"jobName":"paragraph_1568639132535_-1396094377","id":"20190916-130532_1169390024","dateCreated":"2019-09-16T13:05:32+0000","dateStarted":"2019-10-09T15:27:13+0000","dateFinished":"2019-10-09T15:27:13+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:150"},{"text":"%script\ndrop view ORDERS_ML_TRAIN_V;\nCREATE VIEW ORDERS_ML_TRAIN_V as\nselect O.ORDER_ID, O.ORDER_MODE, O.ORDER_STATUS, \n       O.ORDER_TOTAL, O.PROMOTION_ID, O.WAREHOUSE_ID, O.DELIVERY_TYPE, O.COST_OF_DELIVERY, O.CUSTOMER_CLASS, M.SCORE \nfrom  ORDERS O, ORDERS_ML_TRAIN M \nwhere O.ORDER_ID = M.ORDER_ID;","user":"SOE","dateUpdated":"2019-10-09T15:27:18+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"\nView ORDERS_ML_TRAIN_V dropped.\n\n\n---------------------------\n\nView ORDERS_ML_TRAIN_V created.\n\n\n---------------------------\n"}]},"jobName":"paragraph_1570544710568_-865229056","id":"20191008-142510_305426001","dateCreated":"2019-10-08T14:25:10+0000","dateStarted":"2019-10-09T15:27:20+0000","dateFinished":"2019-10-09T15:27:20+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:151"},{"text":"%script\ndrop view ORDERS_ML_TEST_V;\nCREATE VIEW ORDERS_ML_TEST_V as\nselect O.ORDER_ID, O.ORDER_MODE, O.ORDER_STATUS, \n       O.ORDER_TOTAL, O.PROMOTION_ID, O.WAREHOUSE_ID, O.DELIVERY_TYPE, O.COST_OF_DELIVERY, O.CUSTOMER_CLASS, M.SCORE \nfrom  ORDERS O, ORDERS_ML_TEST M \nwhere O.ORDER_ID = M.ORDER_ID;\n","user":"SOE","dateUpdated":"2019-10-09T15:26:13+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"\nView ORDERS_ML_TEST_V dropped.\n\n\n---------------------------\n\nView ORDERS_ML_TEST_V created.\n\n\n---------------------------\n"}]},"jobName":"paragraph_1570444707988_1159384078","id":"20191007-103827_838572832","dateCreated":"2019-10-07T10:38:27+0000","dateStarted":"2019-10-09T15:26:13+0000","dateFinished":"2019-10-09T15:26:13+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:152"},{"text":"%script\n\nselect min(ORDER_ID) as MIN from ORDERS;\nselect max(ORDER_ID) as MAX from ORDERS;\nselect count(1) from ORDERS;\n","user":"SOE","dateUpdated":"2019-11-04T09:51:38+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql","tableHide":true,"editorHide":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"MIN   \n    2 \n\n\n\n---------------------------\nMAX       \n  7251661 \n\n\n\n---------------------------\nCOUNT(1)   \n   7163434 \n\n\n\n---------------------------\n"}]},"jobName":"paragraph_1568639203437_501395254","id":"20190916-130643_458883232","dateCreated":"2019-09-16T13:06:43+0000","dateStarted":"2019-10-09T08:52:08+0000","dateFinished":"2019-10-09T08:52:11+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:153"},{"title":"Selección de un subconjunto para crear el dataset de entranamiento","text":"%script\n\ndelete from ORDERS_ML_TRAIN;\n\ninsert into ORDERS_ML_TRAIN (ORDER_ID)\nselect ORDER_ID from ORDERS where order_id > 7349999 and rownum <125001;\n","user":"SOE","dateUpdated":"2019-10-09T15:16:55+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql","title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"\n500,001 rows deleted.\n\n\n---------------------------\n\n125,000 rows inserted.\n\n\n---------------------------\n"}]},"jobName":"paragraph_1568639227466_1456973604","id":"20190916-130707_38065289","dateCreated":"2019-09-16T13:07:07+0000","dateStarted":"2019-10-09T15:16:55+0000","dateFinished":"2019-10-09T15:16:56+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:154"},{"text":"%sql\nupdate ORDERS_ML_TRAIN set SCORE=0;","user":"SOE","dateUpdated":"2019-10-09T15:17:01+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"sql","editOnDblClick":false},"editorMode":"ace/mode/osql"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Updated 125000 row(s)."}]},"jobName":"paragraph_1568710797688_-2016979596","id":"20190917-085957_184433958","dateCreated":"2019-09-17T08:59:57+0000","dateStarted":"2019-10-09T15:17:01+0000","dateFinished":"2019-10-09T15:17:05+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:155"},{"text":"%sql\nupdate ORDERS_ML_TRAIN set SCORE=1 \nwhere ORDER_ID in\n(select ORDER_ID from ORDERS where \n ORDER_ID  > 7349999 and\n warehouse_id between 700 and 799);","user":"SOE","dateUpdated":"2019-10-09T15:20:33+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"sql","editOnDblClick":false},"editorMode":"ace/mode/osql"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Updated 12640 row(s)."}]},"jobName":"paragraph_1570439058926_341947626","id":"20191007-090418_86493268","dateCreated":"2019-10-07T09:04:18+0000","dateStarted":"2019-10-09T15:20:33+0000","dateFinished":"2019-10-09T15:20:34+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:156"},{"text":"%sql\nselect SCORE, count(1) as count from ORDERS_ML_TRAIN group by SCORE;","user":"SOE","dateUpdated":"2019-10-09T15:20:38+0000","config":{"colWidth":12,"enabled":true,"results":{"0":{"graph":{"mode":"pieChart","height":300,"optionOpen":false},"helium":{}}},"editorSetting":{"language":"sql","editOnDblClick":false},"editorMode":"ace/mode/osql"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"SCORE\tCOUNT\n1\t12881\n0\t112119\n"}]},"jobName":"paragraph_1570438811186_-688747061","id":"20191007-090011_1262028354","dateCreated":"2019-10-07T09:00:11+0000","dateStarted":"2019-10-09T15:20:38+0000","dateFinished":"2019-10-09T15:20:38+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:157"},{"text":"%sql\nselect count(1) from ORDERS where order_id > 7449999 and warehouse_id between 700 and 799;","user":"SOE","dateUpdated":"2019-10-09T15:21:20+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"sql","editOnDblClick":false},"editorMode":"ace/mode/osql"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"COUNT(1)\n3394\n"}]},"jobName":"paragraph_1570438114996_445700657","id":"20191007-084834_220678516","dateCreated":"2019-10-07T08:48:34+0000","dateStarted":"2019-10-09T15:21:20+0000","dateFinished":"2019-10-09T15:21:20+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:158"},{"text":"%sql\nselect distinct('<'  || DELIVERY_TYPE || '>') from ORDERS where \n ORDER_ID between 4000000 and 4500000;","user":"SOE","dateUpdated":"2019-10-09T14:06:42+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"sql","editOnDblClick":false},"editorMode":"ace/mode/osql"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"('<'||DELIVERY_TYPE||'>')\n<Next_Day>\n<Standard>\n<Express>\n<Collection>\n"}]},"jobName":"paragraph_1570438551836_-59093189","id":"20191007-085551_823489368","dateCreated":"2019-10-07T08:55:51+0000","dateStarted":"2019-10-09T14:06:43+0000","dateFinished":"2019-10-09T14:06:43+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:159"},{"title":"Selección de un subconjunto para dataset de prueba","text":"%script\ndelete from ORDERS_ML_TEST;\n\ninsert into ORDERS_ML_TEST (ORDER_ID)\nselect ORDER_ID from ORDERS where ORDER_ID between 5500000 and 5509999;\n\nupdate ORDERS_ML_TEST set SCORE=0;\n\nupdate ORDERS_ML_TEST set SCORE=1 \nwhere ORDER_ID in\n(select ORDER_ID from ORDERS where \n ORDER_ID between 5500000 and 5509999 and\n ORDER_MODE = 'online' and\n warehouse_id between 675 and 825);","user":"SOE","dateUpdated":"2019-10-09T15:23:45+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql","title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"\n100,000 rows deleted.\n\n\n---------------------------\n\n10,000 rows inserted.\n\n\n---------------------------\n\n10,000 rows updated.\n\n\n---------------------------\n\n590 rows updated.\n\n\n---------------------------\n"}]},"jobName":"paragraph_1570444780822_615657262","id":"20191007-103940_197893776","dateCreated":"2019-10-07T10:39:40+0000","dateStarted":"2019-10-09T15:23:45+0000","dateFinished":"2019-10-09T15:23:47+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:160"},{"text":"%sql\nselect SCORE, count(1) as count from ORDERS_ML_TEST group by SCORE;","user":"SOE","dateUpdated":"2019-11-04T10:48:43+0000","config":{"colWidth":12,"enabled":true,"results":{"0":{"graph":{"mode":"pieChart","height":300,"optionOpen":false},"helium":{}}},"editorSetting":{"language":"sql","editOnDblClick":false},"editorMode":"ace/mode/osql"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"SCORE\tCOUNT\n1\t590\n0\t9410\n"}]},"jobName":"paragraph_1570437251520_1096281520","id":"20191007-083411_1025776358","dateCreated":"2019-10-07T08:34:11+0000","dateStarted":"2019-10-09T15:29:17+0000","dateFinished":"2019-10-09T15:29:17+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:161"},{"text":"%md\n## Machine learning\n\nAquí debajo van los párrafos de la implementación de los algoritmos de clasificación que se van a evaluar.\nConcretamente se prueban\n * Support Vector Machine (SVM)\n * Decission Tree (DT)\n\nSe calcula su precisión y matriz de confusión usando un conjunto de datos de prueba diferente al de entrenamiento.\nAmbos modelos quedan almacenados en la base de datos y pueden usarse de manera similar.","user":"SOE","dateUpdated":"2019-10-08T14:50:58+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"md","editOnDblClick":false},"editorMode":"ace/mode/markdown","editorHide":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h2>Machine learning</h2>\n<p>Aquí debajo van los párrafos de la implementación de los algoritmos de clasificación que se van a evaluar.\n<br  />Concretamente se prueban</p>\n<ul>\n<li>Support Vector Machine (SVM)</li>\n<li>Decission Tree (DT)</li>\n</ul>\n<p>Se calcula su precisión y matriz de confusión usando un conjunto de datos de prueba diferente al de entrenamiento.\n<br  />Ambos modelos quedan almacenados en la base de datos y pueden usarse de manera similar.</p>\n"}]},"jobName":"paragraph_1570440645309_-1317034389","id":"20191007-093045_1666076311","dateCreated":"2019-10-07T09:30:45+0000","dateStarted":"2019-10-08T14:50:55+0000","dateFinished":"2019-10-08T14:50:55+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:162"},{"text":"%md\n### Support Vector Machine\nEn primer lugar se genera un modelo SVM.","user":"SOE","dateUpdated":"2019-10-07T09:53:38+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"sql","editOnDblClick":false},"editorMode":"ace/mode/osql","editorHide":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h3>Support Vector Machine</h3>\n<p>En primer lugar se genera un modelo SVM.</p>\n"}]},"jobName":"paragraph_1570441980217_573152113","id":"20191007-095300_1316419279","dateCreated":"2019-10-07T09:53:00+0000","dateStarted":"2019-10-07T09:53:31+0000","dateFinished":"2019-10-07T09:53:31+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:163"},{"text":"%sql\nCREATE TABLE SETTINGS_ML\nAS\nSELECT *\n     FROM TABLE (DBMS_DATA_MINING.GET_DEFAULT_SETTINGS);\n","user":"SOE","dateUpdated":"2019-10-09T08:54:43+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"sql","editOnDblClick":false},"editorMode":"ace/mode/osql"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Updated 0 row(s)."}]},"jobName":"paragraph_1570439150137_-210228343","id":"20191007-090550_1676789598","dateCreated":"2019-10-07T09:05:50+0000","dateStarted":"2019-10-09T08:54:43+0000","dateFinished":"2019-10-09T08:54:44+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:164"},{"text":"%script\n\nBEGIN\n   DELETE FROM SETTINGS_ML;\n   INSERT INTO SETTINGS_ML\n        VALUES (DBMS_DATA_MINING.ALGO_NAME, 'ALGO_SUPPORT_VECTOR_MACHINES');\n   INSERT INTO SETTINGS_ML\n        VALUES (DBMS_DATA_MINING.PREP_AUTO, 'ON');\n--   INSERT INTO SETTINGS_ML\n--        VALUES (DBMS_DATA_MINING.SVMS_KERNEL_FUNCTION,'SVMS_GAUSSIAN');\n   INSERT INTO SETTINGS_ML\n        VALUES (DBMS_DATA_MINING.ODMS_MISSING_VALUE_TREATMENT,'ODMS_MISSING_VALUE_MEAN_MODE');\n   COMMIT;\nEND;\n","user":"SOE","dateUpdated":"2019-10-09T15:24:20+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"\nPL/SQL procedure successfully completed.\n\n"}]},"jobName":"paragraph_1570440743124_1346130743","id":"20191007-093223_556917846","dateCreated":"2019-10-07T09:32:23+0000","dateStarted":"2019-10-09T15:24:20+0000","dateFinished":"2019-10-09T15:24:21+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:165"},{"text":"%script\n\nBEGIN \n   DBMS_DATA_MINING.DROP_MODEL(\n   model_name            => 'ORDERS_SVM_MODEL'\n   );\n   DBMS_DATA_MINING.CREATE_MODEL(\n      model_name            => 'ORDERS_SVM_MODEL',\n      mining_function       =>  DBMS_DATA_MINING.CLASSIFICATION,\n      data_table_name       => 'ORDERS_ML_TRAIN_V',\n      case_id_column_name   => 'ORDER_ID',\n      target_column_name    => 'SCORE',\n      settings_table_name   => 'SETTINGS_ML');\nEND;\n","user":"SOE","dateUpdated":"2019-10-09T15:28:09+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"\nPL/SQL procedure successfully completed.\n\n"}]},"jobName":"paragraph_1570440757427_-1436357978","id":"20191007-093237_970282149","dateCreated":"2019-10-07T09:32:37+0000","dateStarted":"2019-10-09T15:28:09+0000","dateFinished":"2019-10-09T15:28:13+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:166"},{"text":"%sql \nSELECT setting_name, setting_value, setting_type\nFROM user_mining_model_settings\nWHERE model_name = 'ORDERS_SVM_MODEL'\nORDER BY setting_name;","user":"SOE","dateUpdated":"2019-10-09T08:55:36+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"sql","editOnDblClick":false},"editorMode":"ace/mode/osql"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"SETTING_NAME\tSETTING_VALUE\tSETTING_TYPE\nALGO_NAME\tALGO_SUPPORT_VECTOR_MACHINES\tINPUT\nCLAS_WEIGHTS_BALANCED\tOFF\tDEFAULT\nODMS_DETAILS\tODMS_ENABLE\tDEFAULT\nODMS_MISSING_VALUE_TREATMENT\tODMS_MISSING_VALUE_MEAN_MODE\tINPUT\nODMS_SAMPLING\tODMS_SAMPLING_DISABLE\tDEFAULT\nPREP_AUTO\tON\tINPUT\nSVMS_CONV_TOLERANCE\t.0001\tDEFAULT\nSVMS_KERNEL_FUNCTION\tSVMS_LINEAR\tDEFAULT\n"}]},"jobName":"paragraph_1570441251144_211274730","id":"20191007-094051_918332953","dateCreated":"2019-10-07T09:40:51+0000","dateStarted":"2019-10-09T08:55:36+0000","dateFinished":"2019-10-09T08:55:36+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:167"},{"title":"Precisión del modelo y matriz de confusión","text":"%script\n\nbegin\ndeclare\n  v_accuracy NUMBER;\nbegin\n   EXECUTE IMMEDIATE('drop table ORDERS_SVM_MODEL_TEST_RESULT');\n   EXECUTE IMMEDIATE('drop table ORDERS_SVM_MODEL_CM');\n   \n   DBMS_DATA_MINING.APPLY(\n     model_name => 'ORDERS_SVM_MODEL',\n     data_table_name => 'ORDERS_ML_TEST_V',\n     case_id_column_name => 'ORDER_ID',\n     result_table_name => 'ORDERS_SVM_MODEL_TEST_RESULT');\n\n   EXECUTE IMMEDIATE('CREATE or REPLACE VIEW ORDERS_SVM_MODEL_TEST_RESULT_V as select ORDER_ID, SCORE from ORDERS_ML_TEST_V');\n\n   DBMS_DATA_MINING.COMPUTE_CONFUSION_MATRIX(\n    accuracy => v_accuracy,\n    apply_result_table_name => 'ORDERS_SVM_MODEL_TEST_RESULT',\n    target_table_name => 'ORDERS_SVM_MODEL_TEST_RESULT_V',\n    case_id_column_name => 'ORDER_ID',\n    target_column_name => 'SCORE',\n    confusion_matrix_table_name => 'ORDERS_SVM_MODEL_CM'\n   );\n\n  DBMS_OUTPUT.PUT_LINE('Accuracy of the model: ' || v_accuracy);\nend;\nend;\n","user":"SOE","dateUpdated":"2019-10-09T15:29:41+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql","title":true,"editorHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Accuracy of the model: .941\n\n\nPL/SQL procedure successfully completed.\n\n"}]},"jobName":"paragraph_1570445841199_-1073676636","id":"20191007-105721_104729486","dateCreated":"2019-10-07T10:57:21+0000","dateStarted":"2019-10-09T15:28:23+0000","dateFinished":"2019-10-09T15:28:26+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:168"},{"text":"%script\n\n\ndeclare\ntype cls_array_type is table of varchar2(4000) index by binary_integer;\ncls_array cls_array_type;\ndml_str varchar2(400);\ncommand_str varchar2(400);\n\nBEGIN\ndml_str :='';\ncommand_str :='';\n\nselect distinct(score) bulk collect into cls_array from  ORDERS_ML_TEST order by score;\nFOR i IN cls_array.first..cls_array.last-1 LOOP\n  dml_str := dml_str || '''' || cls_array(i) || ''','; \nEND LOOP;\ndml_str := dml_str || '''' ||  cls_array(cls_array.last) || '''';\n\nexecute immediate ('drop table ORDERS_SVM_ML_CM');\ncommand_str := 'CREATE TABLE ORDERS_SVM_ML_CM as (SELECT * FROM ORDERS_SVM_MODEL_CM PIVOT ( SUM(value) FOR PREDICTED_TARGET_VALUE IN (' || dml_str  || ')))';\nexecute immediate (command_str);\nEND;","user":"SOE","dateUpdated":"2019-10-09T15:28:33+0000","config":{"colWidth":6,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql","editorHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"\nPL/SQL procedure successfully completed.\n\n"}]},"jobName":"paragraph_1570446170088_799744548","id":"20191007-110250_20399195","dateCreated":"2019-10-07T11:02:50+0000","dateStarted":"2019-10-09T15:28:33+0000","dateFinished":"2019-10-09T15:28:33+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:169"},{"text":"%sql\nselect * from ORDERS_SVM_ML_CM order by actual_target_value;","user":"SOE","dateUpdated":"2019-10-09T15:28:36+0000","config":{"colWidth":6,"enabled":true,"results":{},"editorSetting":{"language":"sql","editOnDblClick":false},"editorMode":"ace/mode/osql"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"ACTUAL_TARGET_VALUE\t'0'\t'1'\n0\t9410\t\n1\t590\t\n"}]},"jobName":"paragraph_1570446187384_-1179957109","id":"20191007-110307_1990483935","dateCreated":"2019-10-07T11:03:07+0000","dateStarted":"2019-10-09T15:28:36+0000","dateFinished":"2019-10-09T15:28:36+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:170"},{"text":"%md\n### Decission Tree\nEn segundo lugar se genera un modelo de árbol de decisión","user":"SOE","dateUpdated":"2019-10-07T09:54:07+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"md","editOnDblClick":false},"editorMode":"ace/mode/markdown","editorHide":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h3>Decission Tree</h3>\n<p>En segundo lugar se genera un modelo de árbol de decisión</p>\n"}]},"jobName":"paragraph_1570442024214_1292509963","id":"20191007-095344_11085994","dateCreated":"2019-10-07T09:53:44+0000","dateStarted":"2019-10-07T09:54:05+0000","dateFinished":"2019-10-07T09:54:05+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:171"},{"text":"%script\n\nBEGIN\n   DELETE FROM SETTINGS_ML;\n   INSERT INTO SETTINGS_ML\n        VALUES (DBMS_DATA_MINING.ALGO_NAME, 'ALGO_DECISION_TREE');\n   INSERT INTO SETTINGS_ML\n        VALUES (DBMS_DATA_MINING.PREP_AUTO, 'ON');\n   INSERT INTO SETTINGS_ML\n        VALUES (DBMS_DATA_MINING.ODMS_MISSING_VALUE_TREATMENT,'ODMS_MISSING_VALUE_MEAN_MODE');\n   COMMIT;\nEND;","user":"SOE","dateUpdated":"2019-10-09T15:30:26+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"\nPL/SQL procedure successfully completed.\n\n"}]},"jobName":"paragraph_1570441332605_-410004443","id":"20191007-094212_1754447648","dateCreated":"2019-10-07T09:42:12+0000","dateStarted":"2019-10-09T15:30:26+0000","dateFinished":"2019-10-09T15:30:26+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:172"},{"text":"%script\n\nBEGIN \n   DBMS_DATA_MINING.DROP_MODEL(\n   model_name            => 'ORDERS_DT_MODEL'\n   );\n   DBMS_DATA_MINING.CREATE_MODEL(\n      model_name            => 'ORDERS_DT_MODEL',\n      mining_function       =>  DBMS_DATA_MINING.CLASSIFICATION,\n      data_table_name       => 'ORDERS_ML_TRAIN_V',\n      case_id_column_name   => 'ORDER_ID',\n      target_column_name    => 'SCORE',\n      settings_table_name   => 'SETTINGS_ML');\nEND;","user":"SOE","dateUpdated":"2019-10-09T15:30:29+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"\nPL/SQL procedure successfully completed.\n\n"}]},"jobName":"paragraph_1570441863397_1992906203","id":"20191007-095103_1493734300","dateCreated":"2019-10-07T09:51:03+0000","dateStarted":"2019-10-09T15:30:29+0000","dateFinished":"2019-10-09T15:30:32+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:173"},{"title":"Precisión del modelo y matriz de confusión","text":"%script\n\nbegin\ndeclare\n  v_accuracy NUMBER;\nbegin\n   EXECUTE IMMEDIATE('drop table ORDERS_DT_MODEL_TEST_RESULT');\n   EXECUTE IMMEDIATE('drop table ORDERS_DT_MODEL_CM');\n   \n   DBMS_DATA_MINING.APPLY(\n     model_name => 'ORDERS_DT_MODEL',\n     data_table_name => 'ORDERS_ML_TEST_V',\n     case_id_column_name => 'ORDER_ID',\n     result_table_name => 'ORDERS_DT_MODEL_TEST_RESULT');\n\n   EXECUTE IMMEDIATE('CREATE or REPLACE VIEW ORDERS_DT_MODEL_TEST_RESULT_V as select ORDER_ID, SCORE from ORDERS_ML_TEST_V');\n\n   DBMS_DATA_MINING.COMPUTE_CONFUSION_MATRIX(\n    accuracy => v_accuracy,\n    apply_result_table_name => 'ORDERS_DT_MODEL_TEST_RESULT',\n    target_table_name => 'ORDERS_DT_MODEL_TEST_RESULT_V',\n    case_id_column_name => 'ORDER_ID',\n    target_column_name => 'SCORE',\n    confusion_matrix_table_name => 'ORDERS_DT_MODEL_CM'\n   );\n\n  DBMS_OUTPUT.PUT_LINE('Accuracy of the model: ' || v_accuracy);\nend;\nend;","user":"SOE","dateUpdated":"2019-10-09T15:30:34+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql","title":true,"editorHide":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Accuracy of the model: .9116\n\n\nPL/SQL procedure successfully completed.\n\n"}]},"jobName":"paragraph_1570441899554_-1849550414","id":"20191007-095139_1889458258","dateCreated":"2019-10-07T09:51:39+0000","dateStarted":"2019-10-09T15:30:34+0000","dateFinished":"2019-10-09T15:30:37+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:174"},{"text":"%script\n\n\ndeclare\ntype cls_array_type is table of varchar2(4000) index by binary_integer;\ncls_array cls_array_type;\ndml_str varchar2(400);\ncommand_str varchar2(400);\n\nBEGIN\ndml_str :='';\ncommand_str :='';\n\nselect distinct(score) bulk collect into cls_array from  ORDERS_ML_TEST order by score;\nFOR i IN cls_array.first..cls_array.last-1 LOOP\n  dml_str := dml_str || '''' || cls_array(i) || ''','; \nEND LOOP;\ndml_str := dml_str || '''' ||  cls_array(cls_array.last) || '''';\n\nexecute immediate ('drop table ORDERS_DT_ML_CM');\ncommand_str := 'CREATE TABLE ORDERS_DT_ML_CM as (SELECT * FROM ORDERS_DT_MODEL_CM PIVOT ( SUM(value) FOR PREDICTED_TARGET_VALUE IN (' || dml_str  || ')))';\nexecute immediate (command_str);\nEND;","user":"SOE","dateUpdated":"2019-10-09T15:30:40+0000","config":{"colWidth":6,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql","editorHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"\nPL/SQL procedure successfully completed.\n\n"}]},"jobName":"paragraph_1570442285883_-599717420","id":"20191007-095805_1974006333","dateCreated":"2019-10-07T09:58:05+0000","dateStarted":"2019-10-09T15:30:40+0000","dateFinished":"2019-10-09T15:30:40+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:175"},{"text":"%sql\nselect * from ORDERS_DT_ML_CM order by actual_target_value;","user":"SOE","dateUpdated":"2019-10-09T15:30:43+0000","config":{"colWidth":6,"enabled":true,"results":{},"editorSetting":{"language":"sql","editOnDblClick":false},"editorMode":"ace/mode/osql"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"ACTUAL_TARGET_VALUE\t'0'\t'1'\n0\t8730\t680\n1\t204\t386\n"}]},"jobName":"paragraph_1570442294952_93615422","id":"20191007-095814_1008418150","dateCreated":"2019-10-07T09:58:14+0000","dateStarted":"2019-10-09T15:30:43+0000","dateFinished":"2019-10-09T15:30:43+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:176"},{"text":"%md\n\n### Generar algunas predicciones de clasificación con el modelo\n\nA continuación hacer algunas invocaciones al modelo a modo de ejemplo.\n","user":"SOE","dateUpdated":"2019-10-07T14:09:26+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"md","editOnDblClick":false},"editorMode":"ace/mode/markdown","editorHide":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h3>Generar algunas predicciones de clasificación con el modelo</h3>\n<p>A continuación hacer algunas invocaciones al modelo a modo de ejemplo.</p>\n"}]},"jobName":"paragraph_1570445584290_229130757","id":"20191007-105304_2033550152","dateCreated":"2019-10-07T10:53:04+0000","dateStarted":"2019-10-07T11:07:48+0000","dateFinished":"2019-10-07T11:07:48+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:177"},{"text":"%sql\n\nSELECT\n  PREDICTION(ORDERS_DT_MODEL USING\n   'online' as ORDER_MODE,\n   5 as ORDER_STATUS,\n   4630 as ORDER_TOTAL,\n   463 as PROMOTION_ID,\n   'Standard' as DELIVERY_TYPE,\n   2 as COST_OF_DELIVERY,\n   'Occasional' as CUSTOMER_CLASS,\n   703 as WAREHOUSE_ID\n  ) as SCORE\nfrom dual;","user":"SOE","dateUpdated":"2019-10-10T15:06:01+0000","config":{"colWidth":6,"enabled":true,"results":{},"editorSetting":{"language":"sql","editOnDblClick":false},"editorMode":"ace/mode/osql"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"SCORE\n1\n"}]},"jobName":"paragraph_1570446468475_1908451316","id":"20191007-110748_904581398","dateCreated":"2019-10-07T11:07:48+0000","dateStarted":"2019-10-10T15:05:35+0000","dateFinished":"2019-10-10T15:05:38+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:178"},{"text":"%sql\n\nSELECT\n  PREDICTION(ORDERS_DT_MODEL USING\n   'online' as ORDER_MODE,\n   5 as ORDER_STATUS,\n   4630 as ORDER_TOTAL,\n   563 as PROMOTION_ID,\n   'Express' as DELIVERY_TYPE,\n   2 as COST_OF_DELIVERY,\n   'Occasional' as CUSTOMER_CLASS,\n   406 as WAREHOUSE_ID\n  ) as SCORE\nfrom dual;","user":"SOE","dateUpdated":"2019-10-09T15:43:52+0000","config":{"colWidth":6,"enabled":true,"results":{},"editorSetting":{"language":"sql","editOnDblClick":false},"editorMode":"ace/mode/osql"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"SCORE\n0\n"}]},"jobName":"paragraph_1570457144805_-692743373","id":"20191007-140544_478171679","dateCreated":"2019-10-07T14:05:44+0000","dateStarted":"2019-10-09T15:43:52+0000","dateFinished":"2019-10-09T15:43:53+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:179"},{"title":"Cálculo de score para registros nuevos","text":"%script\n\nCREATE OR REPLACE TRIGGER score_orders_after_insert\nAFTER INSERT\n   ON ORDERS\n   FOR EACH ROW\n\nDECLARE\n\n   cursor cccp (p1 in ORDERS.ORDER_MODE%type, p2 in ORDERS.ORDER_STATUS%type, p3 in ORDERS.ORDER_TOTAL%type,\n   p4 in ORDERS.PROMOTION_ID%type, p5 in ORDERS.DELIVERY_TYPE%type, p6 in ORDERS.COST_OF_DELIVERY%type,\n   p7 in ORDERS.WAREHOUSE_ID%type) is \n   select prediction(ORDERS_DT_MODEL USING\n   p1 as ORDER_MODE,\n   p2  as ORDER_STATUS,\n   p3 as ORDER_TOTAL,\n   p4 as PROMOTION_ID,\n   p5 as DELIVERY_TYPE,\n   p6 as COST_OF_DELIVERY,\n   p7 as WAREHOUSE_ID) as SCORE   \n   from dual;\n\nBEGIN\n\t for cur in cccp(:new.ORDER_MODE, :new.ORDER_STATUS, :new.ORDER_TOTAL, \n\t :new.PROMOTION_ID, :new.DELIVERY_TYPE, :new.COST_OF_DELIVERY, \n\t :new.WAREHOUSE_ID)\n     loop\n       INSERT INTO ORDERS_ML\n       ( order_id, score )\n     VALUES\n       ( :new.order_id, cur.SCORE );\n     end loop;\n\nEXCEPTION\n   when others then raise;\n   \nEND;\n/\n","user":"SOE","dateUpdated":"2019-10-10T15:08:19+0000","config":{"colWidth":12,"enabled":false,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql","title":true,"editorHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"\nTrigger SCORE_SVM_ORDERS_AFTER_INSERT compiled\n\n\n---------------------------\n"}]},"jobName":"paragraph_1570457205646_-582812457","id":"20191007-140645_1013815477","dateCreated":"2019-10-07T14:06:45+0000","dateStarted":"2019-10-09T14:58:28+0000","dateFinished":"2019-10-09T14:58:29+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:180"},{"text":"%script\n\nCREATE OR REPLACE TRIGGER score_orders_after_insert\nAFTER INSERT\n   ON ORDERS\n   FOR EACH ROW\n\nDECLARE\n   v_score number;\n\nBEGIN\n\n   -- calcular el score usando el modelo\n   SELECT\n   PREDICTION(ORDERS_DT_MODEL USING \n   :new.ORDER_MODE as ORDER_MODE,\n   :new.ORDER_STATUS as ORDER_STATUS,\n   :new.ORDER_TOTAL as ORDER_TOTAL,\n   :new.PROMOTION_ID as PROMOTION_ID,\n   :new.DELIVERY_TYPE as DELIVERY_TYPE,\n   :new.COST_OF_DELIVERY as COST_OF_DELIVERY,\n   :new.WAREHOUSE_ID as WAREHOUSE_ID)\n   INTO v_score from dual;\n\n   -- guardar el score calculado\n   INSERT INTO ORDERS_ML\n   ( order_id,\n     score )\n   VALUES\n   ( :new.order_id,\n     v_score );\n\nEXCEPTION\n   when others then raise;\n   \nEND;\n/","user":"SOE","dateUpdated":"2019-10-10T11:14:20+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"\nTrigger SCORE_ORDERS_AFTER_INSERT compiled\n\n\n---------------------------\n"}]},"jobName":"paragraph_1570622346997_-551943790","id":"20191009-115906_42028332","dateCreated":"2019-10-09T11:59:06+0000","dateStarted":"2019-10-10T11:14:20+0000","dateFinished":"2019-10-10T11:14:20+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:181"},{"text":"%script\ndrop TRIGGER score_svm_orders_after_insert;","user":"SOE","dateUpdated":"2019-10-09T08:36:34+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"\nTrigger SCORE_SVM_ORDERS_AFTER_INSERT dropped.\n\n\n---------------------------\n"}]},"jobName":"paragraph_1570523906764_253236970","id":"20191008-083826_2091453937","dateCreated":"2019-10-08T08:38:26+0000","dateStarted":"2019-10-09T08:36:34+0000","dateFinished":"2019-10-09T08:36:35+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:182"},{"text":"%md\n### Inserciones de prueba\n\nUsar estos inserts para validar que el trigger y la invocación al modelo están funcionando bien.\nAl terminar borrar estos registros para no interferir con Swingbench","user":"SOE","dateUpdated":"2019-10-08T14:53:02+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"md","editOnDblClick":false},"editorMode":"ace/mode/markdown","editorHide":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h3>Inserciones de prueba</h3>\n<p>Usar estos inserts para validar que el trigger y la invocación al modelo están funcionando bien.\n<br  />Al terminar borrar estos registros para no interferir con Swingbench</p>\n"}]},"jobName":"paragraph_1570546319720_2143449335","id":"20191008-145159_961754362","dateCreated":"2019-10-08T14:51:59+0000","dateStarted":"2019-10-08T14:53:01+0000","dateFinished":"2019-10-08T14:53:01+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:183"},{"text":"%sql\nINSERT INTO ORDERS\n   ( order_id, order_date, order_mode, \n   customer_id, order_status, order_total, \n   sales_rep_id, promotion_id, warehouse_id, \n   delivery_type, cost_of_delivery, wait_till_all_available, \n   delivery_address_id, customer_class, card_id, \n   invoice_address_id )\n   VALUES\n   ( 10000000, sysdate, 'direct', 983281, 7, 6700, 670, 670, 711, 'Standard', 1, 'ship_asap', 9,'Business',5355042, 9);\n","user":"SOE","dateUpdated":"2019-10-07T14:40:39+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"sql","editOnDblClick":false},"editorMode":"ace/mode/osql"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Updated 1 row(s)."}]},"jobName":"paragraph_1570456931932_-1787444295","id":"20191007-140211_1758118621","dateCreated":"2019-10-07T14:02:11+0000","dateStarted":"2019-10-07T14:40:39+0000","dateFinished":"2019-10-07T14:40:39+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:184"},{"text":"%sql\nINSERT INTO ORDERS\n   ( order_id, order_date, order_mode, \n   customer_id, order_status, order_total, \n   sales_rep_id, promotion_id, warehouse_id, \n   delivery_type, cost_of_delivery, wait_till_all_available, \n   delivery_address_id, customer_class, card_id, \n   invoice_address_id )\n   VALUES\n   ( 10000001, sysdate, 'online', 983281, 3, 8560, 672, 672, 711, 'Express', 1, 'ship_asap', 9,'Occasional',5355042, 9);\n","user":"SOE","dateUpdated":"2019-10-07T14:46:24+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"sql","editOnDblClick":false},"editorMode":"ace/mode/osql","editorHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Updated 1 row(s)."}]},"jobName":"paragraph_1570459425367_2016890412","id":"20191007-144345_1581234717","dateCreated":"2019-10-07T14:43:45+0000","dateStarted":"2019-10-07T14:46:24+0000","dateFinished":"2019-10-07T14:46:24+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:185"},{"text":"%sql\nselect count(1) from ORDERS_ML_V where ORDER_ID>4500000 and SCORE=1;","user":"SOE","dateUpdated":"2019-10-08T14:33:00+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"sql","editOnDblClick":false},"editorMode":"ace/mode/osql"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"COUNT(1)\n0\n"}]},"jobName":"paragraph_1570458562081_1785475198","id":"20191007-142922_968068421","dateCreated":"2019-10-07T14:29:22+0000","dateStarted":"2019-10-08T14:33:00+0000","dateFinished":"2019-10-08T14:33:00+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:186"},{"text":"%sql\nselect max(ORDER_ID) from ORDERS;","user":"SOE","dateUpdated":"2019-10-09T15:32:44+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"sql","editOnDblClick":false},"editorMode":"ace/mode/osql"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"MAX(ORDER_ID)\n7483538\n"}]},"jobName":"paragraph_1570459508655_-789929435","id":"20191007-144508_1266606404","dateCreated":"2019-10-07T14:45:08+0000","dateStarted":"2019-10-09T15:32:44+0000","dateFinished":"2019-10-09T15:32:45+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:187"},{"text":"%sql\nselect count(1) from ORDERS_ML where ORDER_ID > 7148951;","user":"SOE","dateUpdated":"2019-10-09T07:48:18+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"sql","editOnDblClick":false},"editorMode":"ace/mode/osql"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"COUNT(1)\n4388\n"}]},"jobName":"paragraph_1570459654237_390089984","id":"20191007-144734_551944562","dateCreated":"2019-10-07T14:47:34+0000","dateStarted":"2019-10-09T07:48:18+0000","dateFinished":"2019-10-09T07:48:18+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:188"},{"text":"%sql\nselect SCORE, count(1) from ORDERS_ML group by SCORE;","user":"SOE","dateUpdated":"2019-11-04T11:17:38+0000","config":{"colWidth":12,"enabled":true,"results":{"0":{"graph":{"mode":"pieChart","height":300,"optionOpen":false},"helium":{}}},"editorSetting":{"language":"sql","editOnDblClick":false},"editorMode":"ace/mode/osql"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"SCORE\tCOUNT(1)\n0\t72601\n1\t8368\n"}]},"jobName":"paragraph_1570523667240_-1548125087","id":"20191008-083427_1915806441","dateCreated":"2019-10-08T08:34:27+0000","dateStarted":"2019-11-04T11:17:39+0000","dateFinished":"2019-11-04T11:17:39+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:189"},{"text":"%sql\nselect max(ORDER_ID) from ORDERS;\n","user":"SOE","dateUpdated":"2019-10-08T09:05:09+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"sql","editOnDblClick":false},"editorMode":"ace/mode/osql"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"MAX(ORDER_ID)\n7160796\n"}]},"jobName":"paragraph_1570524012592_1289719859","id":"20191008-084012_1630400671","dateCreated":"2019-10-08T08:40:12+0000","dateStarted":"2019-10-08T09:05:09+0000","dateFinished":"2019-10-08T09:05:10+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"$$hashKey":"object:190"},{"text":"%sql\n","user":"SOE","dateUpdated":"2019-10-08T08:40:27+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"sql","editOnDblClick":false},"editorMode":"ace/mode/osql"},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1570524027441_304377926","id":"20191008-084027_1733395011","dateCreated":"2019-10-08T08:40:27+0000","status":"READY","progressUpdateIntervalMs":500,"commited":false,"$$hashKey":"object:191"}],"name":"SOE - online ML scoring","id":"179304","angularObjects":{"ORA67663A5F9F:shared_process":[],"ORA914FDD3E1F:shared_process":[],"ORA1C36BCC6D0:shared_process":[],"MDW381939C745:shared_process":[]},"config":{"looknfeel":"default","personalizedMode":"false"},"info":{}}